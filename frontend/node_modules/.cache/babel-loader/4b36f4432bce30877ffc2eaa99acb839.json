{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\react-book-store\\\\frontend\\\\src\\\\screens\\\\ProductsScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport Sidebar from '../layout/Sidebar';\nimport { saveProduct, listProducts, deleteProdcut, deleteProductReview } from '../actions/productActions';\nimport { listShops } from '../actions/shopActions';\nimport Rating from '../components/Rating';\n\nfunction ProductsScreen(props) {\n  _s();\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [modalReviewVisible, setModalReviewVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [shopId, setShopId] = useState('');\n  const [reviews, setReviews] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const shopList = useSelector(state => state.shopList);\n  const {\n    shops\n  } = shopList;\n  const productList = useSelector(state => state.productList);\n  const {\n    loading,\n    products,\n    error\n  } = productList;\n  const productSave = useSelector(state => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave\n  } = productSave;\n  const productDelete = useSelector(state => state.productDelete);\n  const {\n    success: successDelete\n  } = productDelete;\n  const productReviewDelete = useSelector(state => state.productReviewDelete);\n  const {\n    success: successReviewDelete,\n    product: productReview\n  } = productReviewDelete;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n\n    if (successReviewDelete) {\n      console.log(productReview.data.reviews);\n      setReviews(productReview.data.reviews);\n    }\n\n    dispatch(listProducts());\n    dispatch(listShops());\n    return () => {//\n    };\n  }, [successSave, successDelete, successReviewDelete, productReview, dispatch]);\n\n  const openModal = product => {\n    setModalVisible(true);\n    setId(product._id);\n    setName(product.name || \"\");\n    setPrice(product.price || \"\");\n    setDescription(product.description || \"\");\n    setImage(product.image || \"\");\n    setBrand(product.brand || \"\");\n    setCategory(product.category || \"\");\n    setCountInStock(product.countInStock || \"\");\n    setShopId(product.shopId || \"\");\n  };\n\n  const openReviewModal = product => {\n    setModalReviewVisible(true);\n    setId(product._id);\n    setReviews(product.reviews || \"\");\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(saveProduct({\n      _id: id,\n      name,\n      price,\n      image,\n      brand,\n      category,\n      countInStock,\n      description,\n      shopId\n    }));\n  };\n\n  const deleteHandler = product => {\n    if (window.confirm(\"Are you sure to delete this data?\")) {\n      dispatch(deleteProdcut(product._id));\n    }\n  };\n\n  const deleteReviewHandler = (productId, reviewId) => {\n    if (window.confirm(\"Are you sure to delete this data?\")) {\n      dispatch(deleteProductReview(productId, reviewId));\n    }\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    setUploading(true);\n    axios.post('/api/uploads/s3', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setImage(response.data);\n      setUploading(false);\n    }).catch(err => {\n      console.log(err);\n      setUploading(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"breadcrumb-item\",\n          href: process.env.PUBLIC_URL + \"/\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"breadcrumb-item active\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"static about-sec\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2\",\n            children: /*#__PURE__*/_jsxDEV(Sidebar, {\n              activeMenu: 'products'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-10\",\n            children: [modalVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form1\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: submitHandler,\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"form-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                      children: [id ? 'Edit' : 'Create', \" Product\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 154,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [loadingSave && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: \"Loading...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 45\n                    }, this), errorSave && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: errorSave\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 43\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Shop Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      name: \"shopId\",\n                      value: shopId,\n                      id: \"shopId\",\n                      onChange: e => setShopId(e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Select Shop\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 169,\n                        columnNumber: 33\n                      }, this), shops.map(shop => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: shop._id,\n                        children: shop.name\n                      }, shop._id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 171,\n                        columnNumber: 37\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"name\",\n                      value: name,\n                      id: \"name\",\n                      onChange: e => setName(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"price\",\n                      children: \"Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"price\",\n                      value: price,\n                      id: \"price\",\n                      onChange: e => setPrice(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"image\",\n                      children: \"Image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 196,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"hidden\",\n                      name: \"image\",\n                      value: image,\n                      id: \"image\",\n                      onChange: e => setImage(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 197,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      onChange: uploadFileHandler\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 29\n                    }, this), uploading && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: \"Uploading...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 43\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"brand\",\n                      children: \"Brand\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"brand\",\n                      value: brand,\n                      id: \"brand\",\n                      onChange: e => setBrand(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"countInStock\",\n                      children: \"CountInStock\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"countInStock\",\n                      value: countInStock,\n                      id: \"countInStock\",\n                      onChange: e => setCountInStock(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"name\",\n                      children: \"Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"category\",\n                      value: category,\n                      id: \"category\",\n                      onChange: e => setCategory(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"description\",\n                      children: \"Description\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                      name: \"description\",\n                      value: description,\n                      id: \"description\",\n                      onChange: e => setDescription(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"submit\",\n                        className: \"btn btn-primary btn-lg\",\n                        children: id ? 'Update' : 'Create'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 29\n                      }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: () => setModalVisible(false),\n                        className: \"btn btn-secondary btn-lg\",\n                        children: \"Back\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 252,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 21\n            }, this), modalReviewVisible && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Reviews\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table table-striped\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Rating\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 272,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Comment\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 275,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: reviews.map(review => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: review.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 281,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(Rating, {\n                        value: review.rating\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 282,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: review.createdAt.substring(0, 10)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 283,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: review.comment\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 284,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-danger btn-sm\",\n                        onClick: () => deleteReviewHandler(id, review._id),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 285,\n                      columnNumber: 25\n                    }, this)]\n                  }, review._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 33\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [error, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 31\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary btn-lg\",\n                onClick: () => openModal({}),\n                children: \"Create Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-list\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table table-striped\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 314,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Category\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 316,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Brand\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Action\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: products.map(product => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 324,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.createdAt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: product.brand\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-success btn-sm\",\n                        onClick: () => openReviewModal(product),\n                        children: \"Reviews\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 29\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-info btn-sm\",\n                        onClick: () => openModal(product),\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 333,\n                        columnNumber: 29\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-danger btn-sm\",\n                        onClick: () => deleteHandler(product),\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 336,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 27\n                    }, this)]\n                  }, product._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ProductsScreen, \"uNYRrk9QOXG5aUCx6IDJ16RC0WU=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = ProductsScreen;\nexport default ProductsScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsScreen\");","map":{"version":3,"sources":["F:/react-book-store/frontend/src/screens/ProductsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","Sidebar","saveProduct","listProducts","deleteProdcut","deleteProductReview","listShops","Rating","ProductsScreen","props","modalVisible","setModalVisible","modalReviewVisible","setModalReviewVisible","id","setId","name","setName","price","setPrice","image","setImage","brand","setBrand","category","setCategory","countInStock","setCountInStock","description","setDescription","shopId","setShopId","reviews","setReviews","uploading","setUploading","shopList","state","shops","productList","loading","products","error","productSave","loadingSave","success","successSave","errorSave","productDelete","successDelete","productReviewDelete","successReviewDelete","product","productReview","dispatch","console","log","data","openModal","_id","openReviewModal","submitHandler","e","preventDefault","deleteHandler","window","confirm","deleteReviewHandler","productId","reviewId","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","then","response","catch","err","process","env","PUBLIC_URL","value","map","shop","review","rating","createdAt","substring","comment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport axios from 'axios';\r\nimport Sidebar from '../layout/Sidebar'; \r\nimport {\r\n  saveProduct,\r\n  listProducts,\r\n  deleteProdcut,\r\n  deleteProductReview,\r\n} from '../actions/productActions';\r\nimport {\r\n  listShops,\r\n} from '../actions/shopActions';\r\nimport Rating from '../components/Rating';\r\n\r\nfunction ProductsScreen(props) {\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalReviewVisible, setModalReviewVisible] = useState(false);\r\n  const [id, setId] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [image, setImage] = useState('');\r\n  const [brand, setBrand] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [countInStock, setCountInStock] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [shopId, setShopId] = useState('');\r\n  const [reviews, setReviews] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n  const shopList = useSelector((state) => state.shopList);\r\n  const { shops} = shopList;\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, products, error } = productList;\r\n  \r\n  const productSave = useSelector((state) => state.productSave);\r\n  const {\r\n    loading: loadingSave,\r\n    success: successSave,\r\n    error: errorSave,\r\n  } = productSave;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    success: successDelete\r\n  } = productDelete;\r\n\r\nconst productReviewDelete = useSelector((state) => state.productReviewDelete);\r\n  const {\r\n    success: successReviewDelete,\r\n    product:productReview\r\n  } = productReviewDelete;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (successSave) {\r\n      setModalVisible(false);\r\n    }\r\n    \r\n    if (successReviewDelete) {\r\n        console.log(productReview.data.reviews);\r\n        setReviews(productReview.data.reviews);\r\n    }\r\n    dispatch(listProducts());\r\n    dispatch(listShops());\r\n    return () => {\r\n      //\r\n    };\r\n  }, [successSave, successDelete, successReviewDelete,productReview, dispatch]);\r\n\r\n  const openModal = (product) => {\r\n    setModalVisible(true);\r\n    setId(product._id);\r\n    setName(product.name || \"\");\r\n    setPrice(product.price || \"\");\r\n    setDescription(product.description || \"\");\r\n    setImage(product.image || \"\");\r\n    setBrand(product.brand || \"\");\r\n    setCategory(product.category || \"\");\r\n    setCountInStock(product.countInStock || \"\");\r\n    setShopId(product.shopId || \"\");\r\n  };\r\n\r\n  const openReviewModal = (product) => {\r\n    setModalReviewVisible(true);\r\n    setId(product._id);\r\n    setReviews(product.reviews || \"\");\r\n  };\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      saveProduct({\r\n        _id: id,\r\n        name,\r\n        price,\r\n        image,\r\n        brand,\r\n        category,\r\n        countInStock,\r\n        description,\r\n        shopId\r\n      })\r\n    );\r\n  };\r\n  const deleteHandler = (product) => {\r\n      if (window.confirm(\"Are you sure to delete this data?\")) {\r\n        dispatch(deleteProdcut(product._id));\r\n      }\r\n  };\r\n  const deleteReviewHandler = (productId, reviewId) => {\r\n        if (window.confirm(\"Are you sure to delete this data?\")) {\r\n            dispatch(deleteProductReview(productId, reviewId));\r\n        }\r\n  };\r\n  \r\n const uploadFileHandler = (e) => {\r\n    const file = e.target.files[0];\r\n    const bodyFormData = new FormData();\r\n    bodyFormData.append('image', file);\r\n    setUploading(true);\r\n    axios\r\n      .post('/api/uploads/s3', bodyFormData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      })\r\n      .then((response) => {\r\n        setImage(response.data);\r\n        setUploading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setUploading(false);\r\n      });\r\n  };\r\n  return (\r\n        <>\r\n            <div className=\"breadcrumb\">\r\n                <div className=\"container\">\r\n                    <a className=\"breadcrumb-item\" href={process.env.PUBLIC_URL+\"/\"}>Home</a>\r\n                    <span className=\"breadcrumb-item active\">Profile</span>\r\n                </div>\r\n            </div>\r\n            <section className=\"static about-sec\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-2\">\r\n                            <Sidebar activeMenu={'products'} />\r\n                        </div>\r\n                        <div className=\"col-10\">\r\n                {modalVisible && (\r\n                    <div className=\"form1\">\r\n                      <form onSubmit={submitHandler}>\r\n                        <ul className=\"form-container\">\r\n                          <li>\r\n                            <h2>{id ? 'Edit' : 'Create'} Product</h2>\r\n                          </li>\r\n                          <li>\r\n                            {loadingSave && <div>Loading...</div>}\r\n                            {errorSave && <div>{errorSave}</div>}\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"name\">Shop Name</label>\r\n                            <select \r\n                              name=\"shopId\"\r\n                              value={shopId}\r\n                              id=\"shopId\"\r\n                              onChange={(e) => setShopId(e.target.value)}\r\n                            >\r\n                                <option value=\"\">Select Shop</option>\r\n                                {shops.map((shop) => (\r\n                                    <option key={shop._id} value={shop._id}>{shop.name}</option>        \r\n                                ))}\r\n                            </select>\r\n                          </li>  \r\n                          <li>\r\n                            <label htmlFor=\"name\">Name</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"name\"\r\n                              value={name}\r\n                              id=\"name\"\r\n                              onChange={(e) => setName(e.target.value)}\r\n                            ></input>\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"price\">Price</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"price\"\r\n                              value={price}\r\n                              id=\"price\"\r\n                              onChange={(e) => setPrice(e.target.value)}\r\n                            ></input>\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"image\">Image</label>\r\n                            <input\r\n                              type=\"hidden\"\r\n                              name=\"image\"\r\n                              value={image}\r\n                              id=\"image\"\r\n                              onChange={(e) => setImage(e.target.value)}\r\n                            ></input>\r\n                            <input type=\"file\" onChange={uploadFileHandler}></input>\r\n                            {uploading && <div>Uploading...</div>}\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"brand\">Brand</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"brand\"\r\n                              value={brand}\r\n                              id=\"brand\"\r\n                              onChange={(e) => setBrand(e.target.value)}\r\n                            ></input>\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"countInStock\">CountInStock</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"countInStock\"\r\n                              value={countInStock}\r\n                              id=\"countInStock\"\r\n                              onChange={(e) => setCountInStock(e.target.value)}\r\n                            ></input>\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"name\">Category</label>\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"category\"\r\n                              value={category}\r\n                              id=\"category\"\r\n                              onChange={(e) => setCategory(e.target.value)}\r\n                            ></input>\r\n                          </li>\r\n                          <li>\r\n                            <label htmlFor=\"description\">Description</label>\r\n                            <textarea\r\n                              name=\"description\"\r\n                              value={description}\r\n                              id=\"description\"\r\n                              onChange={(e) => setDescription(e.target.value)}\r\n                            ></textarea>\r\n                          </li>\r\n                          <li>\r\n                            <div>\r\n                            <button type=\"submit\" className=\"btn btn-primary btn-lg\">\r\n                              {id ? 'Update' : 'Create'}\r\n                            </button>\r\n                            &nbsp;\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => setModalVisible(false)}\r\n                              className=\"btn btn-secondary btn-lg\"\r\n                            >\r\n                              Back\r\n                            </button>\r\n                    </div>\r\n                          </li>\r\n                        </ul>\r\n                      </form>\r\n                    </div>\r\n                )}\r\n                {modalReviewVisible && (\r\n                    <>\r\n                    <h3>Reviews</h3>\r\n                    <table className=\"table table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Name</th>\r\n                        <th>Rating</th>\r\n                        <th>Date</th>\r\n                        <th>Comment</th>\r\n                        <th>Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {reviews.map((review) => (\r\n                      <tr key={review._id}>\r\n                        <td>{review.name}</td>\r\n                        <td><Rating value={review.rating}></Rating></td>\r\n                        <td>{review.createdAt.substring(0, 10)}</td>\r\n                        <td>{review.comment}</td>\r\n                        <td>\r\n                            <button\r\n                              className=\"btn btn-danger btn-sm\"\r\n                              onClick={() => deleteReviewHandler(id, review._id)}\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                        </td>\r\n                      </tr>\r\n                        ))}\r\n                    </tbody>\r\n                    </table>\r\n                    <hr />\r\n                    </>\r\n                )}\r\n    \r\n                    {loading && <div>Loading...</div>}\r\n                    {error && <div>{error} </div>}\r\n                <div className=\"product-header\">\r\n                    <h2>Products</h2>\r\n                    <button className=\"btn btn-primary btn-lg\" onClick={() => openModal({})}>\r\n                      Create Product\r\n                    </button>\r\n                </div>\r\n                <div className=\"product-list\">\r\n                  <table className=\"table table-striped\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Name</th>\r\n                        <th>Price</th>\r\n                        <th>Category</th>\r\n                        <th>Date</th>\r\n                        <th>Brand</th>\r\n                        <th>Action</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {products.map((product) => (\r\n                        <tr key={product._id}>\r\n                          <td>{product.name}</td>\r\n                          <td>{product.price}</td>\r\n                          <td>{product.category}</td>\r\n                          <td>{product.createdAt}</td>\r\n                          <td>{product.brand}</td>\r\n                          <td>\r\n                            <button className=\"btn btn-success btn-sm\" onClick={() => openReviewModal(product)}>\r\n                              Reviews\r\n                            </button>{' '}\r\n                            <button className=\"btn btn-info btn-sm\" onClick={() => openModal(product)}>\r\n                              Edit\r\n                            </button>{' '}\r\n                            <button\r\n                              className=\"btn btn-danger btn-sm\"\r\n                              onClick={() => deleteHandler(product)}\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                  </div>\r\n          </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </>\r\n  );\r\n}\r\nexport default ProductsScreen;"]},"metadata":{},"sourceType":"module"}