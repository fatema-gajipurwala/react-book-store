{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\react-book-store\\\\frontend\\\\src\\\\screens\\\\SigninScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { signin } from '../actions/userActions';\nimport { useForm } from \"react-hook-form\";\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport axios from 'axios';\n\nfunction SigninScreen(props) {\n  _s();\n\n  var _errors$email;\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [verified, setVerified] = useState('');\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    loading,\n    userInfo,\n    error\n  } = userSignin;\n  const dispatch = useDispatch();\n  const redirect = props.location.search ? props.location.search.split(\"=\")[1] : '/';\n  useEffect(() => {\n    var vUserId = props.match.params.id;\n\n    if (userInfo) {\n      props.history.push(redirect);\n    }\n\n    if (vUserId) {\n      axios.post('/api/users/verify-email', {\n        id: vUserId\n      }).then(response => {\n        setVerified(response.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n\n    return () => {//\n    };\n  }, [userInfo, props, redirect]);\n\n  const submitHandler = e => {\n    dispatch(signin(email, password));\n  };\n\n  const sendFacebookToken = (userID, accessToken) => {\n    axios.post(\"http://localhost:5000/api/users/facebooklogin\", {\n      userID,\n      accessToken\n    }).then(res => {\n      console.log(res.data);\n    }).catch(error => {\n      console.log('FACEBOOK SIGNIN ERROR', error.response);\n    });\n  };\n\n  const sendGoogleToken = tokenId => {\n    axios.post(\"http://localhost:5000/api/users/googlelogin\", {\n      idToken: tokenId\n    }).then(res => {\n      console.log(res.data);\n    }).catch(error => {\n      console.log('GOOGLE SIGNIN ERROR', error.response);\n    });\n  };\n\n  const responseGoogle = response => {\n    console.log(response);\n    sendGoogleToken(response.tokenId);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n    sendFacebookToken(response.userID, response.accessToken);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"breadcrumb-item\",\n          href: process.env.PUBLIC_URL + \"/\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"breadcrumb-item active\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"static about-sec\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"offset-4 col-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form1\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit(submitHandler),\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"form-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                      children: \"Sign-In\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: \"Loading...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 95,\n                      columnNumber: 23\n                    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"alert alert-danger\",\n                      children: error.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 21\n                    }, this), verified && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"alert alert-success\",\n                      children: verified.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 24\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"email\",\n                      children: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 100,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"email\",\n                      name: \"email\",\n                      id: \"email\",\n                      value: email,\n                      onChange: e => setEmail(e.target.value),\n                      ref: register({\n                        required: \"This field is required\",\n                        pattern: {\n                          value: /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/,\n                          message: \"Please enter valid email address\"\n                        }\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 103,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 11\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"password\",\n                      children: \"Password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 11\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"password\",\n                      id: \"password\",\n                      name: \"password\",\n                      onChange: e => setPassword(e.target.value),\n                      ref: register({\n                        required: true\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 11\n                    }, this), errors.password && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"This field is required\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      type: \"submit\",\n                      className: \"btn btn-primary btn-lg\",\n                      children: \"Signin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    style: {\n                      textAlign: \"center\"\n                    },\n                    children: \"OR\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(GoogleLogin, {\n                      clientId: \"687167937028-bdnjkk7hqt4ad84umks5hki9vd3js2qg.apps.googleusercontent.com\",\n                      onSuccess: responseGoogle,\n                      onFailure: responseGoogle,\n                      cookiePolicy: 'single_host_origin'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 9\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(FacebookLogin, {\n                      appId: \"2048894621900811\",\n                      autoLoad: false,\n                      callback: responseFacebook,\n                      buttonStyle: {\n                        width: 300,\n                        height: 40,\n                        fontSize: 18,\n                        padding: 6\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"text-right\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: \"/reset\",\n                      children: \"Forgot password?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"New User?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: redirect === \"/\" ? \"register\" : \"register?redirect=\" + redirect,\n                      className: \"btn btn-secondary text-center\",\n                      children: \"Create Account\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 11\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 9\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 7\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SigninScreen, \"FOax0orYAN5nl4GKCIsDggplxww=\", false, function () {\n  return [useForm, useSelector, useDispatch];\n});\n\n_c = SigninScreen;\nexport default SigninScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"SigninScreen\");","map":{"version":3,"sources":["F:/react-book-store/frontend/src/screens/SigninScreen.js"],"names":["React","useEffect","useState","Link","useSelector","useDispatch","signin","useForm","GoogleLogin","FacebookLogin","axios","SigninScreen","props","register","handleSubmit","errors","email","setEmail","password","setPassword","verified","setVerified","userSignin","state","loading","userInfo","error","dispatch","redirect","location","search","split","vUserId","match","params","id","history","push","post","then","response","data","catch","err","console","log","submitHandler","e","sendFacebookToken","userID","accessToken","res","sendGoogleToken","tokenId","idToken","responseGoogle","responseFacebook","process","env","PUBLIC_URL","message","target","value","required","pattern","textAlign","width","height","fontSize","padding"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { signin } from '../actions/userActions';\r\nimport { useForm } from \"react-hook-form\";\r\nimport GoogleLogin from 'react-google-login';\r\nimport FacebookLogin from 'react-facebook-login';\r\nimport axios from 'axios';\r\n\r\nfunction SigninScreen(props) {\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  \r\n  const [verified, setVerified] = useState('');\r\n  const userSignin = useSelector(state => state.userSignin);\r\n  const { loading, userInfo, error } = userSignin;\r\n  const dispatch = useDispatch();\r\n  const redirect = props.location.search ? props.location.search.split(\"=\")[1] : '/';\r\n  useEffect(() => {\r\n    var vUserId = props.match.params.id;\r\n    if (userInfo) {\r\n      props.history.push(redirect);\r\n    }\r\n    if (vUserId) {\r\n        axios.post('/api/users/verify-email', {id:vUserId}).then((response) => {\r\n            setVerified(response.data);\r\n        }).catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n    return () => {\r\n      //\r\n    };\r\n  }, [userInfo, props, redirect]);\r\n\r\n  const submitHandler = (e) => {\r\n    dispatch(signin(email, password));\r\n\r\n  }\r\n  const sendFacebookToken = (userID, accessToken) => {\r\n    axios\r\n      .post(\"http://localhost:5000/api/users/facebooklogin\", {\r\n        userID,\r\n        accessToken\r\n      })\r\n      .then(res => {\r\n        console.log(res.data);\r\n      })\r\n      .catch(error => {\r\n        console.log('FACEBOOK SIGNIN ERROR', error.response);\r\n      });\r\n  };\r\n\r\n  const sendGoogleToken = tokenId => {\r\n    axios\r\n      .post(\"http://localhost:5000/api/users/googlelogin\", {\r\n        idToken: tokenId\r\n      })\r\n      .then(res => {\r\n        console.log(res.data);\r\n      })\r\n      .catch(error => {\r\n        console.log('GOOGLE SIGNIN ERROR', error.response);\r\n      });\r\n  }\r\n  const responseGoogle = (response) => {\r\n    console.log(response);\r\n    sendGoogleToken(response.tokenId);\r\n  }\r\n\r\n  const responseFacebook = response => {\r\n    console.log(response);\r\n    sendFacebookToken(response.userID, response.accessToken)\r\n  };\r\n  return (\r\n        <>\r\n            <div className=\"breadcrumb\">\r\n                <div className=\"container\">\r\n                    <a className=\"breadcrumb-item\" href={process.env.PUBLIC_URL+\"/\"}>Home</a>\r\n                    <span className=\"breadcrumb-item active\">Sign In</span>\r\n                </div>\r\n            </div>\r\n            <section className=\"static about-sec\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"offset-4 col-4\">\r\n                            <div className=\"form1\">\r\n    <form onSubmit={handleSubmit(submitHandler)}>\r\n      <ul className=\"form-container\">\r\n        <li>\r\n          <h2>Sign-In</h2>\r\n        </li>\r\n        <li>\r\n          {loading && <div>Loading...</div>}\r\n          {error && <div className=\"alert alert-danger\">{error.message}</div>}\r\n          {verified && <div className=\"alert alert-success\">{verified.message}</div>}\r\n        </li>\r\n        <li>\r\n          <label htmlFor=\"email\">\r\n            Email\r\n          </label>\r\n          <input type=\"email\" name=\"email\" id=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} ref={register({\r\n                required: \"This field is required\",\r\n                pattern: {\r\n                  value: /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$/,\r\n                  message: \"Please enter valid email address\"\r\n                }\r\n              })}>\r\n          </input>\r\n          {/* errors will return when field validation fails  */}\r\n          <span className=\"text-danger\">{errors.email?.message}</span>\r\n        </li>\r\n        <li>\r\n          <label htmlFor=\"password\">Password</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)} ref={register({ required: true })}>\r\n          </input>\r\n          {errors.password && <span className=\"text-danger\">This field is required</span>}\r\n        </li>\r\n        <li>\r\n          <button type=\"submit\" className=\"btn btn-primary btn-lg\">Signin</button>\r\n        </li>\r\n        <li style={{textAlign:\"center\"}}>\r\n          OR\r\n        </li>\r\n        <li>\r\n        <GoogleLogin\r\n        clientId=\"687167937028-bdnjkk7hqt4ad84umks5hki9vd3js2qg.apps.googleusercontent.com\"\r\n        onSuccess={responseGoogle}\r\n        onFailure={responseGoogle}\r\n        cookiePolicy={'single_host_origin'}\r\n        />\r\n        </li>\r\n        <li>\r\n        \r\n          <FacebookLogin\r\n        appId=\"2048894621900811\"\r\n        autoLoad={false}\r\n        callback={responseFacebook}\r\n        buttonStyle={{width:300,height:40,fontSize:18,padding:6}}  />\r\n\r\n        </li>\r\n        <li className=\"text-right\">\r\n            <Link to=\"/reset\">Forgot password?</Link>\r\n        </li>\r\n        <li>\r\n          New User?\r\n        </li>\r\n        <li>\r\n          <Link to={redirect === \"/\" ? \"register\" : \"register?redirect=\" + redirect} className=\"btn btn-secondary text-center\" >Create Account</Link>\r\n        </li>\r\n      </ul>\r\n    </form>\r\n  </div>\r\n  </div>\r\n  </div>\r\n  </div>\r\n  </section>\r\n  </>\r\n          );\r\n}\r\nexport default SigninScreen;"]},"metadata":{},"sourceType":"module"}